<div class="menu-page">
    <div class="restaurant-header">
        <div class="header-row">
            <div>
                <h2 class="section-title">{{ restaurantName || 'Menú del Restaurante' }}</h2>
                <p class="header-hint">Elegí un producto para ver su detalle.</p>
            </div>
            <a class="back-link" routerLink="/restaurants">Volver</a>
        </div>
    </div>
    <app-quick-nav [categories]="categories" (onSelect)="filterByCategory($event)"></app-quick-nav>

    <section class="menu-section promo" *ngIf="destacados.length > 0">
        <div class="section-title-row carousel-head">
            <h4>Destacados</h4>
            <div class="carousel-actions" *ngIf="destacados.length > destacadosVisibleCount">
                <button type="button" class="carousel-btn" (click)="prevDestacados()" [disabled]="!canMoveDestacadosPrev" aria-label="Anterior"><span class="material-symbols-outlined">arrow_back</span></button>
                <button type="button" class="carousel-btn" (click)="nextDestacados()" [disabled]="!canMoveDestacadosNext" aria-label="Siguiente"><span class="material-symbols-outlined">arrow_forward</span></button>
            </div>
        </div>
        <div class="menu-grid featured-grid">
            <div class="menu-col" *ngFor="let prod of destacadosWindow">
                <app-product-card [product]="prod"></app-product-card>
            </div>
        </div>
    </section>

    <section class="menu-section hh" *ngIf="happyHour.length > 0">
        <div class="section-title-row">
            <h4>Happy Hour</h4>
        </div>
        <div class="menu-grid">
            <div class="menu-col" *ngFor="let prod of happyHour">
                <app-product-card [product]="prod"></app-product-card>
            </div>
        </div>
    </section>

    <div *ngIf="loading" class="state">Cargando menú...</div>
    <div *ngIf="!loading && errorMessage" class="state error">{{ errorMessage }}</div>

    <div *ngFor="let cat of categories" class="category-block" [class.hidden]="selectedCategoryId && selectedCategoryId !== cat.id">
        <h5 class="section-title">{{ cat.nombre }}</h5>
        <div class="menu-grid">
            <div class="menu-col" *ngFor="let prod of getProductsByCategory(cat.id)">
                <app-product-card [product]="prod"></app-product-card>
            </div>
        </div>
        <div class="empty" *ngIf="getProductsByCategory(cat.id).length === 0">No hay productos en esta categoría.</div>
    </div>
</div>




